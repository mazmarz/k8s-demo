[marco@dude puppet]$
[marco@dude puppet]$
[marco@dude puppet]$ git add .
[marco@dude puppet]$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#   (use "git push" to publish your local commits)
#
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       new file:   .vagrant/machines/master/google/action_provision
#       new file:   .vagrant/machines/master/google/box_meta
#       new file:   .vagrant/machines/master/google/creator_uid
#       new file:   .vagrant/machines/master/google/id
#       new file:   .vagrant/machines/master/google/index_uuid
#       new file:   .vagrant/machines/master/google/synced_folders
#       new file:   .vagrant/machines/worker1/google/action_provision
#       new file:   .vagrant/machines/worker1/google/box_meta
#       new file:   .vagrant/machines/worker1/google/creator_uid
#       new file:   .vagrant/machines/worker1/google/id
#       new file:   .vagrant/machines/worker1/google/index_uuid
#       new file:   .vagrant/machines/worker1/google/synced_folders
#       new file:   .vagrant/machines/worker1/google/vagrant_cwd
#       new file:   .vagrant/machines/worker2/google/action_provision
#       new file:   .vagrant/machines/worker2/google/box_meta
#       new file:   .vagrant/machines/worker2/google/creator_uid
#       new file:   .vagrant/machines/worker2/google/id
#       new file:   .vagrant/machines/worker2/google/index_uuid
#       new file:   .vagrant/machines/worker2/google/synced_folders
#       new file:   .vagrant/machines/worker2/google/vagrant_cwd
#       modified:   .vagrant/provisioners/ansible/inventory/vagrant_ansible_inventory
#       modified:   Vagrantfile
#       new file:   master_playbook.yaml
#       new file:   playground-s-11-a95d40-1448a44f8edf.json
#
[marco@dude puppet]$ git commit -m "WORKS with basic and master but too much looping"
[master add248e] WORKS with basic and master but too much looping
 24 files changed, 85 insertions(+), 10 deletions(-)
 create mode 100644 .vagrant/machines/master/google/action_provision
 create mode 100644 .vagrant/machines/master/google/box_meta
 create mode 100644 .vagrant/machines/master/google/creator_uid
 create mode 100644 .vagrant/machines/master/google/id
 create mode 100644 .vagrant/machines/master/google/index_uuid
 create mode 100644 .vagrant/machines/master/google/synced_folders
 create mode 100644 .vagrant/machines/worker1/google/action_provision
 create mode 100644 .vagrant/machines/worker1/google/box_meta
 create mode 100644 .vagrant/machines/worker1/google/creator_uid
 create mode 100644 .vagrant/machines/worker1/google/id
 create mode 100644 .vagrant/machines/worker1/google/index_uuid
 create mode 100644 .vagrant/machines/worker1/google/synced_folders
 create mode 100644 .vagrant/machines/worker1/google/vagrant_cwd
 create mode 100644 .vagrant/machines/worker2/google/action_provision
 create mode 100644 .vagrant/machines/worker2/google/box_meta
 create mode 100644 .vagrant/machines/worker2/google/creator_uid
 create mode 100644 .vagrant/machines/worker2/google/id
 create mode 100644 .vagrant/machines/worker2/google/index_uuid
 create mode 100644 .vagrant/machines/worker2/google/synced_folders
 create mode 100644 .vagrant/machines/worker2/google/vagrant_cwd
 rewrite .vagrant/provisioners/ansible/inventory/vagrant_ansible_inventory (68%)
 create mode 100644 master_playbook.yaml
 create mode 100644 playground-s-11-a95d40-1448a44f8edf.json
[marco@dude puppet]$
[marco@dude puppet]$ ^C
[marco@dude puppet]$ vagrant validate
all
master
workers
Vagrantfile validated successfully.
[marco@dude puppet]$ vagrant up
all
master
workers
Bringing machine 'master' up with 'google' provider...
Bringing machine 'worker1' up with 'google' provider...
Bringing machine 'worker2' up with 'google' provider...
==> worker1: Checking if box 'google/gce' version '0.1.0' is up to date...
==> worker2: Checking if box 'google/gce' version '0.1.0' is up to date...
==> worker2: Launching an instance with the following settings...
==> worker2:  -- Name:            worker2
==> worker2:  -- Project:         playground-s-11-d19c7b
==> worker2:  -- Type:            n1-standard-1
==> worker2:  -- Disk type:       pd-standard
==> worker2:  -- Disk size:       10 GB
==> worker2:  -- Disk name:
==> worker2:  -- Image:
==> worker2:  -- Image family:    rhel-7
==> master: Checking if box 'google/gce' version '0.1.0' is up to date...
==> worker2:  -- Instance Group:
==> worker2:  -- Zone:            us-central1-f
==> worker2:  -- Network:         default
==> worker2:  -- Network Project: playground-s-11-d19c7b
==> worker2:  -- Metadata:        '{}'
==> worker2:  -- Labels:          '{}'
==> worker2:  -- Network tags:    '[]'
==> worker2:  -- IP Forward:
==> master: Launching an instance with the following settings...
==> worker2:  -- Use private IP:  false
==> master:  -- Name:            master
==> worker2:  -- External IP:
==> master:  -- Project:         playground-s-11-d19c7b
==> worker2:  -- Preemptible:     false
==> master:  -- Type:            n1-standard-1
==> worker2:  -- Auto Restart:    true
==> master:  -- Disk type:       pd-standard
==> worker2:  -- On Maintenance:  MIGRATE
==> master:  -- Disk size:       10 GB
==> worker2:  -- Autodelete Disk: true
==> master:  -- Disk name:
==> worker2:  -- Additional Disks:[]
==> master:  -- Image:
==> master:  -- Image family:    rhel-7
==> master:  -- Instance Group:
==> master:  -- Zone:            us-central1-f
==> master:  -- Network:         default
==> master:  -- Network Project: playground-s-11-d19c7b
==> master:  -- Metadata:        '{}'
==> master:  -- Labels:          '{}'
==> master:  -- Network tags:    '[]'
==> master:  -- IP Forward:
==> master:  -- Use private IP:  false
==> master:  -- External IP:
==> master:  -- Preemptible:     false
==> master:  -- Auto Restart:    true
==> master:  -- On Maintenance:  MIGRATE
==> master:  -- Autodelete Disk: true
==> master:  -- Additional Disks:[]
==> worker1: Launching an instance with the following settings...
==> worker1:  -- Name:            worker1
==> worker1:  -- Project:         playground-s-11-d19c7b
==> worker1:  -- Type:            n1-standard-1
==> worker1:  -- Disk type:       pd-standard
==> worker1:  -- Disk size:       10 GB
==> worker1:  -- Disk name:
==> worker1:  -- Image:
==> worker1:  -- Image family:    rhel-7
==> worker1:  -- Instance Group:
==> worker1:  -- Zone:            us-central1-f
==> worker1:  -- Network:         default
==> worker1:  -- Network Project: playground-s-11-d19c7b
==> worker1:  -- Metadata:        '{}'
==> worker1:  -- Labels:          '{}'
==> worker1:  -- Network tags:    '[]'
==> worker1:  -- IP Forward:
==> worker1:  -- Use private IP:  false
==> worker1:  -- External IP:
==> worker1:  -- Preemptible:     false
==> worker1:  -- Auto Restart:    true
==> worker1:  -- On Maintenance:  MIGRATE
==> worker1:  -- Autodelete Disk: true
==> worker1:  -- Additional Disks:[]
==> worker1: Waiting for instance to become "ready"...
==> worker1: Machine is booted and ready for use!
==> worker1: Waiting for SSH to become available...
==> master: Waiting for instance to become "ready"...
==> master: Machine is booted and ready for use!
==> master: Waiting for SSH to become available...
==> master: Machine is ready for SSH access!
==> master: Running provisioner: ansible...
==> worker1: Machine is ready for SSH access!
==> worker1: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    master: Running ansible-playbook...
    worker1: Running ansible-playbook...

PLAY [all] *********************************************************************

TASK [Gathering Facts] *********************************************************

PLAY [all] *********************************************************************

TASK [Gathering Facts] *********************************************************
ok: [master]

TASK [install Docker] **********************************************************
ok: [worker1]

TASK [install Docker] **********************************************************
==> worker2: Waiting for instance to become "ready"...
==> worker2: Machine is booted and ready for use!
==> worker2: Waiting for SSH to become available...
==> worker2: Machine is ready for SSH access!
==> worker2: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    worker2: Running ansible-playbook...

PLAY [all] *********************************************************************

TASK [Gathering Facts] *********************************************************
ok: [worker2]

TASK [install Docker] **********************************************************
changed: [master]

TASK [start Docker] ************************************************************
changed: [worker1]

TASK [start Docker] ************************************************************
changed: [master]

TASK [disable SELinux] *********************************************************
changed: [worker1]

TASK [disable SELinux] *********************************************************
changed: [master]

TASK [disable SELinux on reboot] ***********************************************
changed: [worker1]

TASK [disable SELinux on reboot] ***********************************************
 [WARNING]: SELinux state change will take effect next reboot

changed: [master]

TASK [ensure net.bridge.bridge-nf-call-ip6tables is set to 1] ******************
 [WARNING]: SELinux state change will take effect next reboot

changed: [worker1]

TASK [ensure net.bridge.bridge-nf-call-ip6tables is set to 1] ******************
 [WARNING]: The value 1 (type int) in a string field was converted to u'1'
(type string). If this does not look like what you expect, quote the entire
value to ensure it does not change.

changed: [master]

TASK [ensure net.bridge.bridge-nf-call-iptables is set to 1] *******************
changed: [worker1]
 [WARNING]: The value 1 (type int) in a string field was converted to u'1'
(type string). If this does not look like what you expect, quote the entire
value to ensure it does not change.


TASK [ensure net.bridge.bridge-nf-call-iptables is set to 1] *******************
changed: [master]

TASK [add Kubernetes' YUM repository] ******************************************
changed: [worker1]

TASK [add Kubernetes' YUM repository] ******************************************
changed: [master]

TASK [install kubelet] *********************************************************
changed: [worker1]

TASK [install kubelet] *********************************************************
changed: [master]

TASK [install kubeadm] *********************************************************
changed: [worker1]

TASK [install kubeadm] *********************************************************
changed: [worker2]

TASK [start Docker] ************************************************************
changed: [worker2]

TASK [disable SELinux] *********************************************************
changed: [worker2]

TASK [disable SELinux on reboot] ***********************************************
changed: [master]

TASK [start kubelet] ***********************************************************
 [WARNING]: SELinux state change will take effect next reboot

changed: [worker2]

TASK [ensure net.bridge.bridge-nf-call-ip6tables is set to 1] ******************
changed: [worker1]

TASK [start kubelet] ***********************************************************
changed: [master]

PLAY [master] ******************************************************************

TASK [Gathering Facts] *********************************************************
 [WARNING]: The value 1 (type int) in a string field was converted to u'1'
(type string). If this does not look like what you expect, quote the entire
value to ensure it does not change.

changed: [worker2]

TASK [ensure net.bridge.bridge-nf-call-iptables is set to 1] *******************
changed: [worker1]

PLAY [master] ******************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************
worker1                    : ok=11   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

==> worker1: Running provisioner: ansible...
==> worker1: An error occurred. The error will be shown after all tasks complete.
ok: [master]

TASK [install kubectl] *********************************************************
changed: [worker2]

TASK [add Kubernetes' YUM repository] ******************************************
ok: [master]

PLAY RECAP *********************************************************************
changed: [worker2]
master                     : ok=13   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0


TASK [install kubelet] *********************************************************
==> master: Running provisioner: ansible...
==> master: An error occurred. The error will be shown after all tasks complete.
changed: [worker2]

TASK [install kubeadm] *********************************************************
changed: [worker2]

TASK [start kubelet] ***********************************************************
changed: [worker2]

PLAY [master] ******************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************
worker2                    : ok=11   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

==> worker2: Running provisioner: ansible...
==> worker2: An error occurred. The error will be shown after all tasks complete.
An error occurred while executing multiple actions in parallel.
Any errors that occurred are shown below.

An unexpected error occurred when executing the action on the
'master' machine. Please report this as a bug:

forbidden: Required 'compute.instances.get' permission for 'projects/playground-s-11-d19c7b/zones/us-central1-f/instances/master'

/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:218:in `check_status'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/api_command.rb:116:in `check_status'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:183:in `process_response'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:299:in `execute_once'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:104:in `block (2 levels) in execute'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:61:in `block in retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `times'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:101:in `block in execute'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:61:in `block in retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `times'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:93:in `execute'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/base_service.rb:360:in `execute_or_queue_command'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/generated/google/apis/compute_v1/service.rb:7060:in `get_instance'
/home/marco/.vagrant.d/gems/2.4.6/gems/fog-google-1.9.1/lib/fog/compute/google/requests/get_server.rb:12:in `get_server'
/home/marco/.vagrant.d/gems/2.4.6/gems/fog-google-1.9.1/lib/fog/compute/google/models/servers.rb:32:in `get'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/read_ssh_info.rb:37:in `read_ssh_info'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/read_ssh_info.rb:28:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/connect_google.rb:53:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/config_validate.rb:25:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:238:in `action_raw'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:209:in `block in action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/environment.rb:582:in `lock'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `action'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/provider.rb:42:in `ssh_info'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:442:in `ssh_info'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/plugins/provisioners/ansible/provisioner/host.rb:20:in `provision'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:138:in `run_provisioner'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:121:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:121:in `block in finalize_action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/environment.rb:525:in `hook'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:126:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:126:in `block in call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:103:in `each'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:103:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:121:in `block in finalize_action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/call.rb:53:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/connect_google.rb:53:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/box_check_outdated.rb:84:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/config_validate.rb:25:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/handle_box.rb:56:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:238:in `action_raw'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:209:in `block in action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/environment.rb:613:in `lock'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/batch_action.rb:86:in `block (2 levels) in run'

An unexpected error occurred when executing the action on the
'worker1' machine. Please report this as a bug:

forbidden: Required 'compute.instances.get' permission for 'projects/playground-s-11-d19c7b/zones/us-central1-f/instances/worker1'

/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:218:in `check_status'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/api_command.rb:116:in `check_status'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:183:in `process_response'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:299:in `execute_once'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:104:in `block (2 levels) in execute'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:61:in `block in retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `times'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:101:in `block in execute'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:61:in `block in retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `times'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:93:in `execute'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/base_service.rb:360:in `execute_or_queue_command'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/generated/google/apis/compute_v1/service.rb:7060:in `get_instance'
/home/marco/.vagrant.d/gems/2.4.6/gems/fog-google-1.9.1/lib/fog/compute/google/requests/get_server.rb:12:in `get_server'
/home/marco/.vagrant.d/gems/2.4.6/gems/fog-google-1.9.1/lib/fog/compute/google/models/servers.rb:32:in `get'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/read_ssh_info.rb:37:in `read_ssh_info'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/read_ssh_info.rb:28:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/connect_google.rb:53:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/config_validate.rb:25:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:238:in `action_raw'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:209:in `block in action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/environment.rb:582:in `lock'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `action'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/provider.rb:42:in `ssh_info'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:442:in `ssh_info'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/plugins/provisioners/ansible/provisioner/host.rb:20:in `provision'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:138:in `run_provisioner'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:121:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:121:in `block in finalize_action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/environment.rb:525:in `hook'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:126:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:126:in `block in call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:103:in `each'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:103:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:121:in `block in finalize_action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/call.rb:53:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/connect_google.rb:53:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/box_check_outdated.rb:84:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/config_validate.rb:25:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/handle_box.rb:56:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:238:in `action_raw'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:209:in `block in action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/environment.rb:613:in `lock'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/batch_action.rb:86:in `block (2 levels) in run'

An unexpected error occurred when executing the action on the
'worker2' machine. Please report this as a bug:

forbidden: Required 'compute.instances.get' permission for 'projects/playground-s-11-d19c7b/zones/us-central1-f/instances/worker2'

/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:218:in `check_status'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/api_command.rb:116:in `check_status'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:183:in `process_response'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:299:in `execute_once'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:104:in `block (2 levels) in execute'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:61:in `block in retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `times'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:101:in `block in execute'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:61:in `block in retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `times'
/home/marco/.vagrant.d/gems/2.4.6/gems/retriable-3.1.2/lib/retriable.rb:56:in `retriable'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/http_command.rb:93:in `execute'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/lib/google/apis/core/base_service.rb:360:in `execute_or_queue_command'
/home/marco/.vagrant.d/gems/2.4.6/gems/google-api-client-0.23.9/generated/google/apis/compute_v1/service.rb:7060:in `get_instance'
/home/marco/.vagrant.d/gems/2.4.6/gems/fog-google-1.9.1/lib/fog/compute/google/requests/get_server.rb:12:in `get_server'
/home/marco/.vagrant.d/gems/2.4.6/gems/fog-google-1.9.1/lib/fog/compute/google/models/servers.rb:32:in `get'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/read_ssh_info.rb:37:in `read_ssh_info'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/read_ssh_info.rb:28:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/connect_google.rb:53:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/config_validate.rb:25:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:238:in `action_raw'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:209:in `block in action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/environment.rb:582:in `lock'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `action'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/provider.rb:42:in `ssh_info'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:442:in `ssh_info'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/plugins/provisioners/ansible/provisioner/host.rb:20:in `provision'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:138:in `run_provisioner'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:121:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:121:in `block in finalize_action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/environment.rb:525:in `hook'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:126:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:126:in `block in call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:103:in `each'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/provision.rb:103:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:121:in `block in finalize_action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/call.rb:53:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/home/marco/.vagrant.d/gems/2.4.6/gems/vagrant-google-2.4.0/lib/vagrant-google/action/connect_google.rb:53:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/box_check_outdated.rb:84:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/config_validate.rb:25:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/after_trigger.rb:26:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/handle_box.rb:56:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builtin/before_trigger.rb:23:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/warden.rb:50:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/builder.rb:116:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `block in run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/util/busy.rb:19:in `busy'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/action/runner.rb:102:in `run'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:238:in `action_raw'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:209:in `block in action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/environment.rb:613:in `lock'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `call'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/machine.rb:195:in `action'
/opt/vagrant/embedded/gems/2.2.5/gems/vagrant-2.2.5/lib/vagrant/batch_action.rb:86:in `block (2 levels) in run'
[marco@dude puppet]$
[marco@dude puppet]$ vagrant destroy -h
^C[marco@dude puppet]$ vagrant destroy -f
all
master
workers
==> worker2: Instance is not created. Please run `vagrant up` first.
==> worker1: Instance is not created. Please run `vagrant up` first.
==> master: Instance is not created. Please run `vagrant up` first.
[marco@dude puppet]$ vagrant status
all
master
workers
Current machine states:

master                    not created (google)
worker1                   not created (google)
worker2                   not created (google)

This environment represents multiple VMs. The VMs are all listed
above with their current state. For more information about a specific
VM, run `vagrant status NAME`.
[marco@dude puppet]$ vagrant up
all
master
workers
Bringing machine 'master' up with 'google' provider...
Bringing machine 'worker1' up with 'google' provider...
Bringing machine 'worker2' up with 'google' provider...
==> worker1: Checking if box 'google/gce' version '0.1.0' is up to date...
==> master: Checking if box 'google/gce' version '0.1.0' is up to date...
==> worker1: Launching an instance with the following settings...
==> master: Launching an instance with the following settings...
==> worker1:  -- Name:            worker1
==> master:  -- Name:            master
==> worker1:  -- Project:         playground-s-11-124608
==> worker2: Checking if box 'google/gce' version '0.1.0' is up to date...
==> master:  -- Project:         playground-s-11-124608
==> worker1:  -- Type:            n1-standard-1
==> master:  -- Type:            n1-standard-1
==> worker1:  -- Disk type:       pd-standard
==> master:  -- Disk type:       pd-standard
==> worker1:  -- Disk size:       10 GB
==> master:  -- Disk size:       10 GB
==> worker1:  -- Disk name:
==> master:  -- Disk name:
==> worker1:  -- Image:
==> master:  -- Image:
==> master:  -- Image family:    rhel-7
==> worker2: Launching an instance with the following settings...
==> worker1:  -- Image family:    rhel-7
==> worker2:  -- Name:            worker2
==> master:  -- Instance Group:
==> worker1:  -- Instance Group:
==> worker2:  -- Project:         playground-s-11-124608
==> master:  -- Zone:            us-central1-f
==> worker1:  -- Zone:            us-central1-f
==> master:  -- Network:         default
==> worker2:  -- Type:            n1-standard-1
==> worker1:  -- Network:         default
==> master:  -- Network Project: playground-s-11-124608
==> worker2:  -- Disk type:       pd-standard
==> master:  -- Metadata:        '{}'
==> worker1:  -- Network Project: playground-s-11-124608
==> worker1:  -- Metadata:        '{}'
==> master:  -- Labels:          '{}'
==> worker2:  -- Disk size:       10 GB
==> worker1:  -- Labels:          '{}'
==> master:  -- Network tags:    '[]'
==> worker2:  -- Disk name:
==> worker1:  -- Network tags:    '[]'
==> master:  -- IP Forward:
==> worker2:  -- Image:
==> worker1:  -- IP Forward:
==> worker2:  -- Image family:    rhel-7
==> master:  -- Use private IP:  false
==> worker2:  -- Instance Group:
==> worker1:  -- Use private IP:  false
==> master:  -- External IP:
==> worker2:  -- Zone:            us-central1-f
==> worker2:  -- Network:         default
==> worker2:  -- Network Project: playground-s-11-124608
==> worker2:  -- Metadata:        '{}'
==> worker2:  -- Labels:          '{}'
==> worker2:  -- Network tags:    '[]'
==> worker2:  -- IP Forward:
==> master:  -- Preemptible:     false
==> worker2:  -- Use private IP:  false
==> worker1:  -- External IP:
==> worker2:  -- External IP:
==> master:  -- Auto Restart:    true
==> worker2:  -- Preemptible:     false
==> worker1:  -- Preemptible:     false
==> master:  -- On Maintenance:  MIGRATE
==> worker2:  -- Auto Restart:    true
==> worker1:  -- Auto Restart:    true
==> master:  -- Autodelete Disk: true
==> master:  -- Additional Disks:[]
==> worker2:  -- On Maintenance:  MIGRATE
==> worker1:  -- On Maintenance:  MIGRATE
==> worker2:  -- Autodelete Disk: true
==> worker2:  -- Additional Disks:[]
==> worker1:  -- Autodelete Disk: true
==> worker1:  -- Additional Disks:[]
==> master: Waiting for instance to become "ready"...
==> master: Machine is booted and ready for use!
==> master: Waiting for SSH to become available...
==> worker1: Waiting for instance to become "ready"...
==> worker2: Waiting for instance to become "ready"...
==> worker1: Machine is booted and ready for use!
==> worker1: Waiting for SSH to become available...
==> worker2: Machine is booted and ready for use!
==> worker2: Waiting for SSH to become available...
==> master: Machine is ready for SSH access!
==> master: Running provisioner: ansible...
==> worker2: Machine is ready for SSH access!
==> worker2: Running provisioner: ansible...
==> worker1: Machine is ready for SSH access!
==> worker1: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    master: Running ansible-playbook...
    worker2: Running ansible-playbook...
    worker1: Running ansible-playbook...

PLAY [all] *********************************************************************

TASK [Gathering Facts] *********************************************************

PLAY [all] *********************************************************************

TASK [Gathering Facts] *********************************************************

PLAY [all] *********************************************************************

TASK [Gathering Facts] *********************************************************
ok: [master]

TASK [install Docker] **********************************************************
ok: [worker2]

TASK [install Docker] **********************************************************
ok: [worker1]

TASK [install Docker] **********************************************************
changed: [worker1]

TASK [start Docker] ************************************************************
changed: [worker2]
changed: [master]

TASK [start Docker] ************************************************************

TASK [start Docker] ************************************************************
changed: [worker1]

TASK [disable SELinux] *********************************************************
changed: [master]

TASK [disable SELinux] *********************************************************
changed: [worker2]

TASK [disable SELinux] *********************************************************
changed: [worker1]

TASK [disable SELinux on reboot] ***********************************************
changed: [worker2]
changed: [master]

TASK [disable SELinux on reboot] ***********************************************

TASK [disable SELinux on reboot] ***********************************************
 [WARNING]: SELinux state change will take effect next reboot

changed: [worker1]

TASK [ensure net.bridge.bridge-nf-call-ip6tables is set to 1] ******************
 [WARNING]: The value 1 (type int) in a string field was converted to u'1'
(type string). If this does not look like what you expect, quote the entire
value to ensure it does not change.

changed: [worker1]
 [WARNING]: SELinux state change will take effect next reboot

 [WARNING]: SELinux state change will take effect next reboot

changed: [master]
changed: [worker2]

TASK [ensure net.bridge.bridge-nf-call-iptables is set to 1] *******************

TASK [ensure net.bridge.bridge-nf-call-ip6tables is set to 1] ******************

TASK [ensure net.bridge.bridge-nf-call-ip6tables is set to 1] ******************
changed: [worker1]

TASK [add Kubernetes' YUM repository] ******************************************
 [WARNING]: The value 1 (type int) in a string field was converted to u'1'
(type string). If this does not look like what you expect, quote the entire
value to ensure it does not change.

changed: [master]

TASK [ensure net.bridge.bridge-nf-call-iptables is set to 1] *******************
 [WARNING]: The value 1 (type int) in a string field was converted to u'1'
(type string). If this does not look like what you expect, quote the entire
value to ensure it does not change.

changed: [worker2]

TASK [ensure net.bridge.bridge-nf-call-iptables is set to 1] *******************
changed: [master]
changed: [worker1]
changed: [worker2]

TASK [add Kubernetes' YUM repository] ******************************************

TASK [add Kubernetes' YUM repository] ******************************************

TASK [install kubelet] *********************************************************
changed: [worker2]
changed: [master]

TASK [install kubelet] *********************************************************

TASK [install kubelet] *********************************************************
changed: [worker1]

TASK [install kubeadm] *********************************************************
changed: [master]
changed: [worker2]

TASK [install kubeadm] *********************************************************

TASK [install kubeadm] *********************************************************
changed: [worker1]

TASK [start kubelet] ***********************************************************
changed: [worker1]

PLAY [master] ******************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************
worker1                    : ok=11   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

==> worker1: Running provisioner: ansible...
changed: [master]

TASK [start kubelet] ***********************************************************
changed: [worker2]

TASK [start kubelet] ***********************************************************
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

changed: [master]

PLAY [master] ******************************************************************
    worker1: Running ansible-playbook...

TASK [Gathering Facts] *********************************************************
changed: [worker2]

PLAY [master] ******************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************
worker2                    : ok=11   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

==> worker2: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode


PLAY [master] ******************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************

==> worker1: Running provisioner: ansible...
ok: [master]

TASK [install kubectl] *********************************************************
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    worker2: Running ansible-playbook...

PLAY [master] ******************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************

==> worker2: Running provisioner: ansible...
    worker1: Running ansible-playbook...
ok: [master]

PLAY RECAP *********************************************************************
master                     : ok=13   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

==> master: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode


PLAY [master] ******************************************************************
skipping: no hosts matched

PLAY [workers] *****************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************

    worker2: Running ansible-playbook...
    master: Running ansible-playbook...

PLAY [master] ******************************************************************
skipping: no hosts matched
 [WARNING]: Could not match supplied host pattern, ignoring: workers


PLAY [workers] *****************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************


PLAY [master] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [master]

TASK [initialize the cluster] **************************************************
changed: [master]

TASK [create .kube directory] **************************************************
changed: [master]

TASK [copy admin.conf to user's kube config] ***********************************
changed: [master]

TASK [install Pod network] *****************************************************
changed: [master]

PLAY RECAP *********************************************************************
master                     : ok=5    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

==> master: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    master: Running ansible-playbook...

PLAY [master] ******************************************************************

TASK [get join command] ********************************************************
changed: [master]

TASK [set join command] ********************************************************
ok: [master]

PLAY [workers] *****************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************
master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

[marco@dude puppet]$ vagrant provision
all
master
workers
==> master: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    master: Running ansible-playbook...

PLAY [all] *********************************************************************

TASK [Gathering Facts] *********************************************************
ok: [master]

TASK [install Docker] **********************************************************
ok: [master]

TASK [start Docker] ************************************************************
ok: [master]

TASK [disable SELinux] *********************************************************
changed: [master]

TASK [disable SELinux on reboot] ***********************************************
 [WARNING]: SELinux state change will take effect next reboot

ok: [master]

TASK [ensure net.bridge.bridge-nf-call-ip6tables is set to 1] ******************
 [WARNING]: The value 1 (type int) in a string field was converted to u'1'
(type string). If this does not look like what you expect, quote the entire
value to ensure it does not change.

ok: [master]

TASK [ensure net.bridge.bridge-nf-call-iptables is set to 1] *******************
ok: [master]

TASK [add Kubernetes' YUM repository] ******************************************
ok: [master]

TASK [install kubelet] *********************************************************
ok: [master]

TASK [install kubeadm] *********************************************************
ok: [master]

TASK [start kubelet] ***********************************************************
ok: [master]

PLAY [master] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [master]

TASK [install kubectl] *********************************************************
ok: [master]

PLAY RECAP *********************************************************************
master                     : ok=13   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

==> master: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    master: Running ansible-playbook...

PLAY [master] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [master]

TASK [initialize the cluster] **************************************************
ok: [master]

TASK [create .kube directory] **************************************************
ok: [master]

TASK [copy admin.conf to user's kube config] ***********************************
ok: [master]

TASK [install Pod network] *****************************************************
ok: [master]

PLAY RECAP *********************************************************************
master                     : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

==> master: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    master: Running ansible-playbook...

PLAY [master] ******************************************************************

TASK [get join command] ********************************************************
changed: [master]

TASK [set join command] ********************************************************
ok: [master]

PLAY [workers] *****************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************
master                     : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

==> worker1: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    worker1: Running ansible-playbook...

PLAY [all] *********************************************************************

TASK [Gathering Facts] *********************************************************
ok: [worker1]

TASK [install Docker] **********************************************************
ok: [worker1]

TASK [start Docker] ************************************************************
ok: [worker1]

TASK [disable SELinux] *********************************************************
changed: [worker1]

TASK [disable SELinux on reboot] ***********************************************
 [WARNING]: SELinux state change will take effect next reboot

ok: [worker1]

TASK [ensure net.bridge.bridge-nf-call-ip6tables is set to 1] ******************
 [WARNING]: The value 1 (type int) in a string field was converted to u'1'
(type string). If this does not look like what you expect, quote the entire
value to ensure it does not change.

ok: [worker1]

TASK [ensure net.bridge.bridge-nf-call-iptables is set to 1] *******************
ok: [worker1]

TASK [add Kubernetes' YUM repository] ******************************************
ok: [worker1]

TASK [install kubelet] *********************************************************
ok: [worker1]

TASK [install kubeadm] *********************************************************
ok: [worker1]

TASK [start kubelet] ***********************************************************
ok: [worker1]

PLAY [master] ******************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************
worker1                    : ok=11   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

==> worker1: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    worker1: Running ansible-playbook...

PLAY [master] ******************************************************************
skipping: no hosts matched

PLAY RECAP *********************************************************************

==> worker1: Running provisioner: ansible...
Vagrant has automatically selected the compatibility mode '2.0'
according to the Ansible version installed (2.8.1).

Alternatively, the compatibility mode can be specified in your Vagrantfile:
https://www.vagrantup.com/docs/provisioning/ansible_common.html#compatibility_mode

    worker1: Running ansible-playbook...

PLAY [master] ******************************************************************
skipping: no hosts matched

PLAY [workers] *****************************************************************

TASK [Gathering Facts] *********************************************************
ok: [worker1]

TASK [join cluster] ************************************************************
fatal: [worker1]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'ansible.vars.hostvars.HostVarsVars o
bject' has no attribute 'join_command'\n\nThe error appears to be in '/home/marco/puppet/workers_playbook.yaml': line 17, column 7, but may\nbe el
sewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n  tasks:\n    - name: join cluster\n      ^ her
e\n"}

PLAY RECAP *********************************************************************
worker1                    : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0

Ansible failed to complete successfully. Any error output should be
visible above. Please fix these errors and try again.
[marco@dude puppet]$ vagrant ssh master
all
master
workers
Last login: Tue Jul 16 20:40:09 2019 from 151.67.157.80
[marco@master ~]$
[marco@master ~]$ kubectl status
Error: unknown command "status" for "kubectl"
Run 'kubectl --help' for usage.
unknown command "status" for "kubectl"
[marco@master ~]$ kubectl get nodes
NAME     STATUS   ROLES    AGE    VERSION
master   Ready    master   7m9s   v1.15.0
[marco@master ~]$ kubectl get pods
No resources found.
[marco@master ~]$ kubectl get pods -A
NAMESPACE     NAME                             READY   STATUS    RESTARTS   AGE
kube-system   coredns-5c98db65d4-8sjcl         1/1     Running   0          7m4s
kube-system   coredns-5c98db65d4-qfrbh         1/1     Running   0          7m4s
kube-system   etcd-master                      1/1     Running   0          6m10s
kube-system   kube-apiserver-master            1/1     Running   0          6m9s
kube-system   kube-controller-manager-master   1/1     Running   0          6m10s
kube-system   kube-flannel-ds-amd64-hpgtp      1/1     Running   0          7m4s
kube-system   kube-proxy-hbf24                 1/1     Running   0          7m4s
kube-system   kube-scheduler-master            1/1     Running   0          6m9s
[marco@master ~]$  kubeadm token create --print-join-command
kubeadm join 10.128.0.2:6443 --token oes6re.d669a4qzqmu9ga3j     --discovery-token-ca-cert-hash sha256:8ed3cf800d4a46f7cd68fc5aa6eb80b0224d55af5eb
e27f484ec9efd6b5becc4
[marco@master ~]$
















